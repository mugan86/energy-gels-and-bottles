import{F as te,b as B,c as s,d as U,e as q,g as R,i as L,j as W,k as z,l as J,m as K,n as H,o as Q,p as X,q as Y,r as Z,x as ee}from"./chunk-XQH2FLA4.js";import{h as V,j as $,l as j}from"./chunk-RTGVFVJU.js";import{Ha as u,Ja as d,La as g,Ma as f,Na as _,O as E,Oa as C,Pa as o,Qa as i,Ra as p,Sa as k,Ta as A,Ua as T,W as w,Xa as x,Ya as c,a as b,ab as r,b as N,bb as v,cb as h,da as I,ea as M,ib as D,kb as G,mb as O,nb as S,va as a,wa as P}from"./chunk-JM2OUKM6.js";var y=class t{constructor(){}materials=Object.entries(b(b({},ee),te)).map(([e,n])=>N(b({name:e},n),{disabled:!0}));getGelsIngredients=()=>[...this.materials];static \u0275fac=function(n){return new(n||t)};static \u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"})};var re=t=>({"not-show":t});function ae(t,e){if(t&1&&(o(0,"option",21),r(1),i()),t&2){let n=c().$implicit;d("value",n.code),a(),v(n.name)}}function le(t,e){if(t&1&&u(0,ae,2,2,"option",21),t&2){let n=e.$implicit;g(n?0:-1)}}function de(t,e){if(t&1&&(o(0,"option",21),r(1),i()),t&2){let n=c().$implicit;d("value",n),a(),v(n)}}function ce(t,e){if(t&1&&u(0,de,2,2,"option",21),t&2){let n=e.$implicit;g(n?0:-1)}}function se(t,e){if(t&1&&(o(0,"option",21),r(1),i()),t&2){let n=c().$implicit;d("value",n),a(),v(n)}}function pe(t,e){if(t&1&&u(0,se,2,2,"option",21),t&2){let n=e.$implicit;g(n?0:-1)}}function me(t,e){if(t&1){let n=T();k(0,9),o(1,"div")(2,"select",10),x("change",function(){let m=I(n).$index,F=c(2);return M(F.onChange(m))}),o(3,"option",11),r(4,"Producto"),i(),_(5,le,1,1,null,null,f),i()(),o(7,"div",12),p(8,"input",13)(9,"input",14),o(10,"select",15)(11,"option",11),r(12,"Unidad"),i(),_(13,ce,1,1,null,null,f),i()(),o(15,"div",16),p(16,"input",17),o(17,"select",18)(18,"option",11),r(19,"Unidad"),i(),_(20,pe,1,1,null,null,f),i(),p(22,"input",19),i(),o(23,"button",20),x("click",function(){let m=I(n).$index,F=c(2);return M(F.deleteItem(m))}),r(24,"\u{1F5D1}\uFE0F"),i(),A()}if(t&2){let n=e.$index,l=c(2);d("formGroupName",n),a(3),d("value",null),a(2),C(l.ingredientsLabels),a(6),d("value",null),a(2),C(l.units),a(5),d("value",null),a(2),C(l.units),a(3),d("ngClass",G(6,re,n===0&&l.ingredientsArray.value.length===1))("disabled",n===0&&l.ingredientsArray.value.length===1)}}function ue(t,e){if(t&1&&(o(0,"div",4),_(1,me,25,8,"ng-container",9,f),i()),t&2){let n=c();a(),C(n.ingredientsArray.controls)}}function ge(t,e){t&1&&(o(0,"span",5),r(1,"No hay elementos, haz click en + Nuevo item"),i())}var ne=class t{constructor(e,n){this.serv=e;this.fb=n}units=["gr","kgr","unit"];ingredientsCostsForm;ingredients=[];ingredientsLabels=[];get ingredientsArray(){return this.ingredientsCostsForm.get("ingredients")}ngOnInit(){this.ingredientsCostsForm=this.fb.group({ingredients:this.fb.array([])}),this.ingredients=this.serv.getGelsIngredients(),console.log(this.ingredients),this.ingredientsLabels=this.ingredients.map(e=>({code:e.name,name:e.label})),this.addNewItem()}createItem(e=""){return this.fb.group({code:[e.name,[s.required]],label:[e.label,[]],price:[e.price,[s.required]],weight:[e.weight,[s.required]],unit:[e.unit,[s.required]],useWeight:[e.useWeight,[s.required]],useUnit:[e.useUnit,[s.required]],cost:[{value:"",disabled:!0}]})}onChange(e){console.log(e),this.ingredientsArray.get(`${e}}`)?.get("label")?.setValue("----")}addNewItem(){this.ingredientsArray.push(this.createItem({code:"",label:"",price:"",weight:"",unit:null,useUnit:null,useWeight:"",disabled:!0}))}displayItems(){this.ingredientsCostsForm.setControl("ingredients",this.fb.array(this.ingredients.map(e=>this.createItem(e))))}deleteItem(e){console.log(e),this.ingredientsArray.removeAt(e)}deleteAll(){this.ingredientsArray.clear(),this.addNewItem()}static \u0275fac=function(n){return new(n||t)(P(y),P(X))};static \u0275cmp=w({type:t,selectors:[["app-calculator"]],standalone:!0,features:[D],decls:30,vars:10,consts:[[1,"calculator-container"],[3,"formGroup"],[1,"product-section"],[1,"product-header"],["formArrayName","ingredients",1,"product-item"],[1,"product-item"],[1,"actions"],[1,"add-item",3,"click","disabled"],[1,"delete-all",3,"click"],[3,"formGroupName"],["formControlName","code",3,"change"],["disabled","",3,"value"],[1,"value-fields"],["type","text","placeholder","Precio","formControlName","price"],["type","text","placeholder","Cantidad por lote","formControlName","weight"],["formControlName","unit"],[1,"usage-fields"],["type","text","placeholder","Cantidad usada","formControlName","useWeight"],["formControlName","useUnit"],["type","text","placeholder","Coste (disabled)","formControlName","cost"],[1,"delete-btn",3,"click","ngClass","disabled"],[3,"value"]],template:function(n,l){n&1&&(o(0,"b"),r(1,"Form's Value:"),i(),r(2),O(3,"json"),p(4,"br"),o(5,"b"),r(6,"Form is Valid ? :"),i(),r(7),p(8,"hr"),r(9),O(10,"json"),o(11,"div",0)(12,"h1"),r(13,"Calculadora Costes"),i(),o(14,"form",1)(15,"div",2)(16,"div",3)(17,"div"),r(18,"Producto"),i(),o(19,"div"),r(20,"Valor"),i(),o(21,"div"),r(22,"Uso y coste"),i()(),u(23,ue,3,0,"div",4)(24,ge,2,0,"span",5),o(25,"div",6)(26,"button",7),x("click",function(){return l.addNewItem()}),r(27,"+ Nuevo item"),i(),o(28,"button",8),x("click",function(){return l.deleteAll()}),r(29,"Eliminar todos"),i()()()()()),n&2&&(a(2),h(`
`,S(3,6,l.ingredientsCostsForm.value),`
`),a(5),h(`
`,l.ingredientsCostsForm.valid,`
`),a(2),h(`
`,S(10,8,l.ingredientsLabels)," "),a(5),d("formGroup",l.ingredientsCostsForm),a(9),g(l.ingredientsArray.value.length?23:24),a(3),d("disabled",l.ingredientsCostsForm.invalid))},dependencies:[$,Y,R,H,Q,B,K,U,q,Z,L,J,W,z,j,V],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f8f8f8;margin:0;padding:0}.calculator-container[_ngcontent-%COMP%]{width:90%;max-width:1100px;margin:20px auto;background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;color:var(--principal-color);margin-bottom:20px}.product-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.product-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 3fr;font-weight:700;text-align:center}.product-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 3fr auto;align-items:center;gap:10px}input[type=text][_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;width:120px}input[disabled][_ngcontent-%COMP%]{background-color:#f0f0f0;cursor:not-allowed}.product-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 2fr auto;align-items:center;gap:10px;padding:15px;border:1px solid #ddd;border-radius:5px;background-color:#f9f9f9}.product-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 3fr;font-weight:700;text-align:center;padding:10px;background-color:#e7f5f2;border-radius:5px;border:1px solid #d5e5e2}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px;padding:10px;background-color:#f2f2f2;border-radius:5px;border:1px solid #ccc}.add-item[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:10px 15px;border-radius:5px}.delete-all[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:10px 15px;border-radius:5px}.value-fields[_ngcontent-%COMP%], .usage-fields[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}button[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]:disabled{background-color:#e0e0e0;cursor:not-allowed}button.not-show[_ngcontent-%COMP%]{cursor:default}.delete-btn[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.add-item[_ngcontent-%COMP%]{background-color:var(--principal-color);color:#fff;border:none}.add-item[_ngcontent-%COMP%]:hover{background-color:var(--principal-color-hover)}.delete-all[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none}@media (max-width: 768px){.product-header[_ngcontent-%COMP%], .product-item[_ngcontent-%COMP%]{grid-template-columns:1fr}.value-fields[_ngcontent-%COMP%], .usage-fields[_ngcontent-%COMP%]{flex-direction:column}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}"]})};export{ne as CalculatorComponent};
